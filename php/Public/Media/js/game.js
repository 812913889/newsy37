$(function(){function t(t){t.addClass("active"),t.siblings().removeClass("active")}function e(t){var e;return t.site?(t.site=t.site+"?n=1_1001",e='target="_blank"'):(t.site="javascript:void(0);",e=""),tpl='<li><div class="game-center-icon"><a '+e+' href="'+t.site+'"><img src="'+t.icon_url+'" alt="'+t.name+'" /></a></div><div class="game-center-msg"><div class="game-center-msg-m1">'+t.name+'</div><div class="game-center-msg-m2">'+h[parseInt(t.type)-1]+"&nbsp;|&nbsp;"+t.pack_size+"M&nbsp;|&nbsp;"+t.dl_num+'万次下载</div><div class="game-center-msg-m3"><a target="_blank" href="'+t.dl+'" class="game-center-down">下载</a><a target="_blank" href="/gift/all/?gid='+t.gid+"&letter="+t.letter+"&gtype="+t.type+'" class="game-center-gift">礼包</a></div></div></li>',tpl}function a(t){o.empty();for(var a=0;a<t.list.length;a++){var i={site:t.list[a].SITE,icon_url:t.list[a].ICON_URL,name:t.list[a].NAME,dl:t.list[a].TG_URL+"1_1001",type:t.list[a].TYPE,pack_size:t.list[a].PACK_SIZE,dl_num:t.list[a].DL_NUM,gid:t.list[a].GID,letter:t.list[a].ENNAME,gtype:t.list[a].TYPE};o.append(e(i))}}function i(){p.children("li").on("click",function(){t($(this));var a=p.children(".active").attr("type-id"),i=g.children(".active").attr("theme-id");$("#gamecenter-pagination").children("a#current").text();$.ajax({url:s,data:{type:a,theme:i,page_no:1},dataType:"jsonp",success:function(t){if(0!=t.total_item){o.empty();for(var a=0;a<t.list.length;a++){var i={site:t.list[a].SITE,icon_url:t.list[a].ICON_URL,name:t.list[a].NAME,type:t.list[a].TYPE,dl:t.list[a].TG_URL+"1_1001",pack_size:t.list[a].PACK_SIZE,dl_num:t.list[a].DL_NUM,gid:t.list[a].GID,letter:t.list[a].ENNAME,gtype:t.list[a].TYPE};o.append(e(i))}c(t.total_item)}else o.empty().append(d),m.empty()}})})}function n(){g.children("li").on("click",function(){t($(this));var a=p.children(".active").attr("type-id"),i=g.children(".active").attr("theme-id"),n=$("#gamecenter-pagination").children("a#current").text();$.ajax({url:s,data:{type:a,theme:i,page_no:n},dataType:"jsonp",success:function(t){if(0!=t.total_item){o.empty();for(var a=0;a<t.list.length;a++){var i={site:t.list[a].SITE,icon_url:t.list[a].ICON_URL,name:t.list[a].NAME,type:t.list[a].TYPE,dl:t.list[a].TG_URL+"1_1001",pack_size:t.list[a].PACK_SIZE,dl_num:t.list[a].DL_NUM,gid:t.list[a].GID,letter:t.list[a].ENNAME,gtype:t.list[a].TYPE};o.append(e(i))}c(t.total_item)}else o.empty().append(d),m.empty()}})})}function r(t,e){$("#gamecenter-pagination").createPage({pageCount:t,current:e})}function c(t){cntPage=Math.ceil(t/21),cntPage>1?r(cntPage,1):m.empty()}function l(){var t=p.children(".active").attr("type-id"),e=g.children(".active").attr("theme-id");page_no=parseInt($("#gamecenter-pagination").children("a#current").text()),$.ajax({url:s,data:{type:t,theme:e,page_no:page_no},dataType:"jsonp",success:function(t){0!=t.total_item?a(t):(o.empty().append(d),m.empty())}})}$(".hot_game_box dl").hover(function(){t($(this))}),$(".game-center-banner li").hover(function(){t($(this))});var s="http://sy.api.m.37.com/api/_searchGame",p=$("#game-type"),g=$("#game-theme"),o=$("#gamecenter-list"),m=$("#gamecenter-pagination"),d='<div style="text-align:center;font-size:22px;margin-bottom:20px;">暂无数据</div>',_="",u="",h=[];$.ajax({url:s,data:{type:0,theme:0},dataType:"jsonp",success:function(t){for(var e=0;e<t.config.arr_type.length;e++)_+='<li type-id="'+t.config.arr_type[e].id+'">'+t.config.arr_type[e].text+"</li>",h.push(t.config.arr_type[e].text);p.append(_);for(var e=0;e<t.config.arr_theme.length;e++)u+='<li theme-id="'+t.config.arr_theme[e].id+'">'+t.config.arr_theme[e].text+"</li>";g.append(u),i(),n(),a(t),c(t.total_item)}}),function(){$("#gamecenter-pagination").on("click","a#prevPage",function(){var t=parseInt($("#gamecenter-pagination").children("a#current").text());r(cntPage,t-1),l()}),$("#gamecenter-pagination").on("click","a#nextPage",function(){var t=parseInt($("#gamecenter-pagination").children("a#current").text());r(cntPage,t+1),l()}),$("#gamecenter-pagination").on("click","a#page",function(){var t=parseInt($(this).text());r(cntPage,t),l()})}()});